#!/bin/bash
 
# sudo apt-get install jq curl (linux) or brew install jq (mac)
# https://www.last.fm/api/account/create to get an API key

PATH=$PATH:/bin:/usr/bin:/usr/local/bin:/Users/zzzeyez/.bin
export PATH

 old=""
 while true; do
     response=`curl -s "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=em3i3mei&api_key=INSERT_YR_API_KEY_HERE&format=json"`
     artist=`echo "$response" | jq ".[] | .track | .[0] | .artist " | tr -d "\#" | jq ".text" | tr -d '"'`
     track=`echo "$response" | jq ".[] | .track | .[0] | .name" | tr -d '"'`
     album=`echo "$response" | jq ".[] | .track | .[0] | .album " | tr -d "\#" | jq ".text" | tr -d '"'`
     new="$artist - $track"
     if [ "$old" != "$new" ]
         then
           notify-send "â™« $new"
           old="$new"
         fi
     sleep 5;
 done
